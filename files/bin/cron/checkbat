#!/bin/sh

BATTERY_NAME='Battery 1'
BATTERY_ALERT_NORMAL_PERCENT=20
BATTERY_ALERT_CRITICAL_PERCENT=10
BATTERY_STATUS="$(acpi -b | grep 'Battery 1')" 

read a b STATUS REMAINING_PERCENT REMAINING_TIME f <<< $( echo ${BATTERY_STATUS} | sed 's/,//g; s/%//g')

# notify-send <urgency level> <battery status title>
function notify {
	export DBUS_SESSION_BUS_ADDRESS=unix:path=/run/user/1000/bus &&
		notify-send -u $1 "Battery status $2" "Percent: $REMAINING_PERCENT%\nTime: $REMAINING_TIME"
}

if [ "$STATUS" = Discharging -a "$REMAINING_PERCENT" -lt $BATTERY_ALERT_NORMAL_PERCENT ]; then
	notify normal low
fi

if [ "$STATUS" = Discharging -a "$REMAINING_PERCENT" -lt $BATTERY_ALERT_CRITICAL_PERCENT ]; then
	notify critical critical
fi


