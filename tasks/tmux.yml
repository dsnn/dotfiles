---
- name: Tmux | Install tmuxp 
  package:
    state: present
    name: 
      - tmuxp

- name: Tmux | Symlink config
  file: 
    src: "{{ user.home }}/dotfiles/files/tmux.conf"
    dest: "{{ user.home }}/.config/tmux/tmux.conf" 
    owner: "{{ user.name }}"
    group: "{{ user.group }}"
    state: link
    follow: false

- name: Tmux | Clone tmux plugins from github
  git:
    repo: https://github.com/tmux-plugins/{{ item }}
    dest: '{{ user.home }}/.config/tmux/plugins/{{ item }}'
    version: master
    update: no 
  with_items:
    - tpm
    - tmux-continuum
    - tmux-resurrect
  tags:
    - tmux
    - packages

- name: Tmux | Update plugins owner
  file:
    path: "{{ user.home}}/.config/tmux/plugins"
    owner: "{{ user.name }}"
    group: "{{ user.group }}"
    recurse: yes
    mode: '0755'

- name: Tmux | Symlink tmuxp workspaces
  file: 
    src: "{{ user.home }}/dotfiles/files/tmuxp"
    dest: "{{ user.home }}/.config/tmuxp" 
    owner: "{{ user.name }}"
    group: "{{ user.group }}"
    state: link
